(()=>{"use strict";const e={standard:"K",metric:"℃",imperial:"℉"},t={standard:"m/s",metric:"m/s",imperial:"mph"},n=(()=>{let n=void 0,o="imperial";document.querySelector("#loading");const a=document.querySelector("#empty-message"),c=document.querySelector("#forecast-box");function i(e,t){c.classList.add("hidden"),document.querySelector("#instructions").textContent="Could not load weather data. Try again!",document.querySelector("#error-message").textContent=e?"":"Reason: "+t.message,a.classList.remove("hidden")}async function r(){a.classList.add("hidden");const r=document.querySelector("#city-input").value;try{n=await async function(e,t){const n=document.querySelector("#city-input");n.style.backgroundImage="linear-gradient(to right, #aeeaae, #eaeaea, #eaeaea";const o=await fetch(`https://api.openweathermap.org/data/2.5/weather?appid=5845423edd9898163659b407e337a129&q=${e}&units=${t}`,{mode:"cors"});n.style.backgroundImage="linear-gradient(to right, #aeeaae, #aeeaae, #eaeaea";const a=await o.json();return n.style.backgroundImage="linear-gradient(to right, #aeeaae, #aeeaae, #aeeaae","200"==a.cod?{code:a.cod,location:{city:a.name,country:a.sys.country,time:a.dt},weather:a.weather[0],temp:{cur_temp:Math.round(a.main.temp),temp_min:Math.round(a.main.temp_min),temp_max:Math.round(a.main.temp_max),feels_like:Math.round(a.main.feels_like)},precipitation:{rain:a.rain??0,snow:a.snow??0},sky_stuff:{clouds:a.clouds.all,wind:a.wind.speed}}:{code:a.cod,message:a.message}}(r,o),"200"==n.code?(function(e,t){const n=new Date(1e3*e.time);document.querySelector("#location").textContent=`${e.city}, ${e.country}`,document.querySelector("#timestamp").textContent=`as of ${n.toLocaleTimeString().slice(0,-6).concat(n.toLocaleTimeString().slice(-3))} ${n.toLocaleDateString()}`}(n.location),function(e){const t=document.querySelector("#weather-icon"),n=`https://openweathermap.org/img/wn/${e.icon}@2x.png`;t.src=n,t.alt=e.main,document.querySelector("#description").textContent=e.description.toString()[0].toUpperCase()+e.description.toString().slice(1)}(n.weather),function(t,n){document.querySelector("#current-temp").textContent=`${t.cur_temp} ${e[n]}`,document.querySelector("#low-temp").textContent=`Min ${t.temp_min} ${e[n]}`,document.querySelector("#high-temp").textContent=`Max ${t.temp_max} ${e[n]}`}(n.temp,o),function(e){const t=document.querySelector("#rain"),n=document.querySelector("#snow");e.rain?t.textContent=`Rain: ${e.rain["1h"]} mm`:t.textContent="No rain",e.snow?n.textContent=`Snow: ${e.snow["1h"]} mm`:n.textContent="No snow"}(n.precipitation),s=n.sky_stuff,document.querySelector("#wind").textContent=`Wind: ${s.wind} ${t[o]}`,document.querySelector("#clouds").textContent=`Cloudiness: ${s.clouds}%`,a.classList.add("hidden"),c.classList.remove("hidden")):i(!1,n)}catch(e){i(!0,e)}var s;await setTimeout((()=>{document.querySelector("#city-input").style.backgroundImage="none"}),250)}return{loadForecast:r,updateUnits:function(){document.getElementById("unit-selection");const e=document.querySelector("#celsius"),t=document.querySelector("#fahrenheit");o="metric"==o?"imperial":"metric",e.classList.toggle("selected-unit"),t.classList.toggle("selected-unit"),e.classList.toggle("unselected-unit"),t.classList.toggle("unselected-unit"),r()}}})();document.querySelector("#unit-selection").addEventListener("click",(e=>{n.updateUnits()})),document.querySelector("#search-form").addEventListener("submit",(e=>{e.preventDefault(),n.loadForecast()}))})();